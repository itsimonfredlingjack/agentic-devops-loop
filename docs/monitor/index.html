<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Visual representation of our AI-driven development workflow">
  <title>Agentic Loop Monitor</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Background colors */
      --bg-deep: #050810;
      --bg-primary: #0a0f1a;
      --bg-secondary: #111827;
      --bg-elevated: #1a2236;
      --bg-card: rgba(255, 255, 255, 0.02);

      /* Border colors */
      --border-subtle: rgba(255, 255, 255, 0.06);
      --border-glow: rgba(100, 200, 255, 0.15);

      /* Text colors */
      --text-primary: #f0f4f8;
      --text-secondary: #94a3b8;
      --text-label: #64748b;
      --text-muted: #475569;

      /* Node colors - vivid orbital palette */
      --color-jira: #3b82f6;
      --color-claude: #f59e0b;
      --color-github: #a78bfa;
      --color-ci: #10b981;
      --color-jules: #ec4899;
      --color-merge: #06b6d4;

      /* Status colors */
      --status-done: #10b981;
      --status-active: #f59e0b;
      --status-pending: #334155;

      /* Typography */
      --font-sans: 'Outfit', -apple-system, sans-serif;
      --font-mono: 'JetBrains Mono', monospace;

      /* Circle geometry */
      --circle-radius: 180;
      --center-x: 250;
      --center-y: 250;
    }

    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
    }

    body {
      font-family: var(--font-sans);
      background: radial-gradient(ellipse at 50% 0%, #0f172a 0%, var(--bg-deep) 70%);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ========== HEADER ========== */
    .header {
      background: linear-gradient(180deg, rgba(10, 15, 26, 0.95) 0%, rgba(10, 15, 26, 0.8) 100%);
      border-bottom: 1px solid var(--border-subtle);
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      backdrop-filter: blur(20px);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .logo {
      width: 42px;
      height: 42px;
      background: conic-gradient(from 0deg, var(--color-jira), var(--color-claude), var(--color-ci), var(--color-jules), var(--color-merge), var(--color-jira));
      border-radius: 12px;
      position: relative;
      animation: logo-spin 20s linear infinite;
    }

    @keyframes logo-spin {
      to { filter: hue-rotate(360deg); }
    }

    .logo::after {
      content: '';
      position: absolute;
      inset: 3px;
      background: var(--bg-primary);
      border-radius: 9px;
    }

    .header h1 {
      font-size: 22px;
      font-weight: 600;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .status-indicator {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--border-subtle);
      padding: 10px 20px;
      border-radius: 100px;
      font-family: var(--font-mono);
      font-size: 13px;
      color: var(--text-secondary);
    }

    .status-dot {
      width: 10px;
      height: 10px;
      background: var(--status-done);
      border-radius: 50%;
      box-shadow: 0 0 16px var(--status-done);
      animation: pulse 2s ease-in-out infinite;
    }

    .status-dot.paused {
      background: var(--status-active);
      box-shadow: 0 0 16px var(--status-active);
      animation: none;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(0.85); opacity: 0.6; }
    }

    /* ========== MAIN LAYOUT ========== */
    .main {
      flex: 1;
      display: grid;
      grid-template-columns: 1fr 360px;
      gap: 64px;
      max-width: 1440px;
      width: 100%;
      margin: 0 auto;
      padding: 48px 56px;
    }

    @media (max-width: 1200px) {
      .main {
        grid-template-columns: 1fr;
        gap: 40px;
        padding: 32px 24px;
      }
    }

    /* ========== ORBITAL CONTAINER ========== */
    .orbital-container {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 540px;
      position: relative;
      cursor: pointer;
    }

    .orbital-svg {
      width: 500px;
      height: 500px;
      filter: drop-shadow(0 0 60px rgba(59, 130, 246, 0.1));
    }

    /* Background orbit ring - dashed */
    .orbit-ring {
      fill: none;
      stroke: rgba(100, 116, 139, 0.15);
      stroke-width: 2;
      stroke-dasharray: 12 8;
    }

    /* Completion arc - fills progressively */
    .completion-arc {
      fill: none;
      stroke: url(#completionGradient);
      stroke-width: 8;
      stroke-linecap: round;
      transform-origin: center;
      transform: rotate(-90deg);
      transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Arc connections between nodes */
    .arc-connection {
      fill: none;
      stroke-width: 3;
      stroke-linecap: round;
      opacity: 0.4;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .arc-connection.active {
      opacity: 1;
      stroke-width: 4;
      filter: drop-shadow(0 0 8px currentColor);
    }

    .arc-connection.done {
      opacity: 0.7;
    }

    /* Node base styling */
    .node {
      cursor: pointer;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .node:hover {
      transform: scale(1.05);
    }

    .node-bg {
      fill: var(--bg-secondary);
      stroke: var(--border-subtle);
      stroke-width: 2;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .node-icon {
      color: var(--text-muted);
      transition: all 0.4s;
    }

    .node-label {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 500;
      fill: var(--text-label);
      letter-spacing: 0.02em;
      transition: all 0.4s;
    }

    /* Active node - 18% larger */
    .node.active .node-bg {
      fill: var(--node-color);
      stroke: var(--node-color);
      filter: drop-shadow(0 0 30px var(--node-glow));
    }

    .node.active .node-icon {
      color: var(--bg-deep);
    }

    .node.active .node-label {
      fill: var(--text-primary);
      font-weight: 600;
    }

    /* Done node state */
    .node.done .node-bg {
      fill: var(--node-color);
      stroke: var(--node-color);
      opacity: 0.6;
    }

    .node.done .node-icon {
      color: var(--bg-deep);
      opacity: 0.8;
    }

    /* Orbiting progress marker */
    .orbit-marker {
      fill: var(--color-claude);
      filter: drop-shadow(0 0 20px rgba(245, 158, 11, 0.8));
      transition: fill 0.4s, filter 0.4s;
    }

    .orbit-marker-glow {
      fill: none;
      stroke: var(--color-claude);
      stroke-width: 2;
      opacity: 0.5;
      animation: marker-ring-pulse 2s ease-out infinite;
    }

    @keyframes marker-ring-pulse {
      0% { r: 10; opacity: 0.6; }
      100% { r: 28; opacity: 0; }
    }

    /* Center info */
    .center-info {
      text-anchor: middle;
      dominant-baseline: middle;
    }

    .center-step-num {
      font-family: var(--font-sans);
      font-size: 48px;
      font-weight: 700;
      fill: var(--text-primary);
      opacity: 0.15;
    }

    .center-label {
      font-family: var(--font-mono);
      font-size: 10px;
      fill: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    /* Click hint */
    .click-hint {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      color: var(--text-muted);
      opacity: 0.4;
      transition: opacity 0.3s;
    }

    .orbital-container:hover .click-hint {
      opacity: 0.7;
    }

    /* ========== SIDE PANEL ========== */
    .side-panel {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .panel-card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
      border: 1px solid var(--border-subtle);
      border-radius: 16px;
      padding: 24px;
      transition: all 0.3s;
    }

    .panel-card:hover {
      border-color: var(--border-glow);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }

    .section-label {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-label);
      margin-bottom: 16px;
    }

    /* Current Task */
    .task-id {
      font-family: var(--font-mono);
      font-size: 14px;
      color: var(--color-jira);
      margin-bottom: 6px;
      font-weight: 500;
    }

    .task-title {
      font-size: 18px;
      font-weight: 600;
      line-height: 1.4;
      margin-bottom: 16px;
      color: var(--text-primary);
    }

    .task-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .task-status {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .task-status::before {
      content: '';
      width: 8px;
      height: 8px;
      background: var(--status-active);
      border-radius: 50%;
      box-shadow: 0 0 10px var(--status-active);
    }

    .task-timer {
      font-family: var(--font-mono);
      font-variant-numeric: tabular-nums;
      font-weight: 500;
    }

    /* Active Step */
    .active-step {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .step-marker {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-mono);
      font-size: 18px;
      font-weight: 600;
      color: var(--bg-deep);
      box-shadow: 0 4px 20px var(--step-shadow);
      transition: all 0.4s;
    }

    .step-info h3 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .step-info p {
      font-size: 13px;
      color: var(--text-secondary);
    }

    /* Progress bar */
    .progress-track {
      height: 6px;
      background: var(--bg-elevated);
      border-radius: 3px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--color-jira), var(--color-merge));
      border-radius: 3px;
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Event Log */
    .event-log {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .event-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 0;
      font-size: 13px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      transition: all 0.3s;
    }

    .event-item:last-child {
      border-bottom: none;
    }

    .event-marker {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      font-weight: bold;
      transition: all 0.3s;
    }

    .event-item.done .event-marker {
      background: var(--status-done);
      box-shadow: 0 0 12px rgba(16, 185, 129, 0.6);
      color: var(--bg-deep);
    }

    .event-item.done { color: var(--text-secondary); }

    .event-item.active .event-marker {
      background: var(--status-active);
      box-shadow: 0 0 12px rgba(245, 158, 11, 0.6);
      animation: glow-pulse 1.5s ease-in-out infinite;
    }

    .event-item.active {
      color: var(--text-primary);
      font-weight: 500;
    }

    @keyframes glow-pulse {
      0%, 100% { box-shadow: 0 0 12px rgba(245, 158, 11, 0.6); }
      50% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.9); }
    }

    .event-item.pending .event-marker {
      background: var(--status-pending);
    }

    .event-item.pending { color: var(--text-muted); }

    /* Footer */
    .footer {
      background: rgba(10, 15, 26, 0.6);
      border-top: 1px solid var(--border-subtle);
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      color: var(--text-muted);
    }

    .footer a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.2s;
    }

    .footer a:hover { color: var(--text-primary); }

    /* Responsive */
    @media (max-width: 768px) {
      .header { padding: 16px 20px; }
      .header h1 { font-size: 18px; }
      .orbital-svg { width: 340px; height: 340px; }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-left">
      <div class="logo"></div>
      <h1>Agentic Loop Monitor</h1>
    </div>
    <div class="status-indicator">
      <span class="status-dot" id="statusDot"></span>
      <span id="statusText">Running</span>
    </div>
  </header>

  <main class="main">
    <section class="orbital-container" id="orbitalContainer">
      <svg class="orbital-svg" viewBox="0 0 500 500">
        <defs>
          <!-- Completion gradient -->
          <linearGradient id="completionGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="var(--color-jira)"/>
            <stop offset="25%" stop-color="var(--color-claude)"/>
            <stop offset="50%" stop-color="var(--color-ci)"/>
            <stop offset="75%" stop-color="var(--color-jules)"/>
            <stop offset="100%" stop-color="var(--color-merge)"/>
          </linearGradient>

          <!-- Arc gradients -->
          <linearGradient id="arc-grad-0" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="var(--color-jira)"/>
            <stop offset="100%" stop-color="var(--color-claude)"/>
          </linearGradient>
          <linearGradient id="arc-grad-1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="var(--color-claude)"/>
            <stop offset="100%" stop-color="var(--color-github)"/>
          </linearGradient>
          <linearGradient id="arc-grad-2" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" stop-color="var(--color-github)"/>
            <stop offset="100%" stop-color="var(--color-ci)"/>
          </linearGradient>
          <linearGradient id="arc-grad-3" x1="100%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" stop-color="var(--color-ci)"/>
            <stop offset="100%" stop-color="var(--color-jules)"/>
          </linearGradient>
          <linearGradient id="arc-grad-4" x1="100%" y1="0%" x2="0%" y2="0%">
            <stop offset="0%" stop-color="var(--color-jules)"/>
            <stop offset="100%" stop-color="var(--color-merge)"/>
          </linearGradient>
          <linearGradient id="arc-grad-5" x1="0%" y1="100%" x2="0%" y2="0%">
            <stop offset="0%" stop-color="var(--color-merge)"/>
            <stop offset="100%" stop-color="var(--color-jira)"/>
          </linearGradient>
        </defs>

        <!-- Background orbit ring (dashed) -->
        <circle class="orbit-ring" cx="250" cy="250" r="180"/>

        <!-- Completion arc -->
        <circle
          class="completion-arc"
          id="completionArc"
          cx="250"
          cy="250"
          r="180"
          stroke-dasharray="1131"
          stroke-dashoffset="1131"
        />

        <!-- Arc connections between nodes -->
        <path class="arc-connection" id="arc-0" stroke="url(#arc-grad-0)" d="M 250,70 A 180,180 0 0,1 405.88,115"/>
        <path class="arc-connection" id="arc-1" stroke="url(#arc-grad-1)" d="M 405.88,115 A 180,180 0 0,1 405.88,385"/>
        <path class="arc-connection" id="arc-2" stroke="url(#arc-grad-2)" d="M 405.88,385 A 180,180 0 0,1 250,430"/>
        <path class="arc-connection" id="arc-3" stroke="url(#arc-grad-3)" d="M 250,430 A 180,180 0 0,1 94.12,385"/>
        <path class="arc-connection" id="arc-4" stroke="url(#arc-grad-4)" d="M 94.12,385 A 180,180 0 0,1 94.12,115"/>
        <path class="arc-connection" id="arc-5" stroke="url(#arc-grad-5)" d="M 94.12,115 A 180,180 0 0,1 250,70"/>

        <!-- Center display -->
        <text class="center-step-num" id="centerStepNum" x="250" y="245">1</text>
        <text class="center-label" x="250" y="275">STEP</text>

        <!-- NODE 0: Jira (12 o'clock - top) -->
        <g class="node" data-step="0" style="--node-color: var(--color-jira); --node-glow: rgba(59, 130, 246, 0.5)">
          <circle class="node-bg" cx="250" cy="70" r="36"/>
          <g class="node-icon" transform="translate(250, 70)">
            <rect x="-10" y="-13" width="20" height="24" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <rect x="-6" y="-17" width="12" height="5" rx="1" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="-6" y1="-2" x2="6" y2="-2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="-6" y1="4" x2="4" y2="4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="-6" y1="10" x2="2" y2="10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </g>
          <text x="250" y="28" text-anchor="middle" class="node-label">JIRA</text>
        </g>

        <!-- NODE 1: Claude Code (2 o'clock - 60°) -->
        <g class="node" data-step="1" style="--node-color: var(--color-claude); --node-glow: rgba(245, 158, 11, 0.5)">
          <circle class="node-bg" cx="405.88" cy="160" r="36"/>
          <g class="node-icon" transform="translate(405.88, 160)">
            <path d="M -12 -10 L -5 0 L -12 10" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="-1" y1="10" x2="10" y2="10" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
            <circle cx="7" cy="-3" r="3.5" fill="currentColor"/>
          </g>
          <text x="455" y="165" text-anchor="start" class="node-label">CLAUDE</text>
        </g>

        <!-- NODE 2: GitHub (4 o'clock - 120°) -->
        <g class="node" data-step="2" style="--node-color: var(--color-github); --node-glow: rgba(167, 139, 250, 0.5)">
          <circle class="node-bg" cx="405.88" cy="340" r="36"/>
          <g class="node-icon" transform="translate(405.88, 340)">
            <circle cx="-6" cy="-9" r="3.5" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="6" cy="-3" r="3.5" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="-6" cy="9" r="3.5" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="-6" y1="-5.5" x2="-6" y2="5.5" stroke="currentColor" stroke-width="2"/>
            <path d="M -6 -3 Q 0 -3 6 0.5" fill="none" stroke="currentColor" stroke-width="2"/>
          </g>
          <text x="455" y="345" text-anchor="start" class="node-label">GITHUB</text>
        </g>

        <!-- NODE 3: CI/CD (6 o'clock - bottom) -->
        <g class="node" data-step="3" style="--node-color: var(--color-ci); --node-glow: rgba(16, 185, 129, 0.5)">
          <circle class="node-bg" cx="250" cy="430" r="36"/>
          <g class="node-icon" transform="translate(250, 430)">
            <circle cx="0" cy="0" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
            <g stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <line x1="0" y1="-12" x2="0" y2="-8"/>
              <line x1="0" y1="8" x2="0" y2="12"/>
              <line x1="-12" y1="0" x2="-8" y2="0"/>
              <line x1="8" y1="0" x2="12" y2="0"/>
            </g>
            <polygon points="-2.5,-4 -2.5,4 4,0" fill="currentColor"/>
          </g>
          <text x="250" y="480" text-anchor="middle" class="node-label">CI/CD</text>
        </g>

        <!-- NODE 4: Jules Review (8 o'clock - 240°) -->
        <g class="node" data-step="4" style="--node-color: var(--color-jules); --node-glow: rgba(236, 72, 153, 0.5)">
          <circle class="node-bg" cx="94.12" cy="340" r="36"/>
          <g class="node-icon" transform="translate(94.12, 340)">
            <path d="M -14 0 Q 0 -12 14 0 Q 0 12 -14 0" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="0" cy="0" r="5" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="0" cy="0" r="2" fill="currentColor"/>
          </g>
          <text x="45" y="345" text-anchor="end" class="node-label">JULES</text>
        </g>

        <!-- NODE 5: Merge (10 o'clock - 300°) -->
        <g class="node" data-step="5" style="--node-color: var(--color-merge); --node-glow: rgba(6, 182, 212, 0.5)">
          <circle class="node-bg" cx="94.12" cy="160" r="36"/>
          <g class="node-icon" transform="translate(94.12, 160)">
            <circle cx="-6" cy="-9" r="3.5" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="6" cy="-9" r="3.5" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="0" cy="9" r="3.5" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M -6 -5.5 L -6 0 Q -6 4 0 6.5" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M 6 -5.5 L 6 0 Q 6 4 0 6.5" fill="none" stroke="currentColor" stroke-width="2"/>
          </g>
          <text x="45" y="165" text-anchor="end" class="node-label">MERGE</text>
        </g>

        <!-- Orbiting marker -->
        <circle class="orbit-marker-glow" id="markerGlow" cx="250" cy="70" r="10"/>
        <circle class="orbit-marker" id="orbitMarker" cx="250" cy="70" r="8"/>
      </svg>
      <div class="click-hint">Click or Space to pause</div>
    </section>

    <aside class="side-panel">
      <div class="panel-card">
        <div class="section-label">Current Task</div>
        <div class="task-id">PROJ-123</div>
        <div class="task-title">Implement CSV export for report dashboard</div>
        <div class="task-meta">
          <span class="task-status">In Progress</span>
          <span class="task-timer" id="taskTimer">0:00</span>
        </div>
      </div>

      <div class="panel-card">
        <div class="section-label">Active Step</div>
        <div class="active-step">
          <div class="step-marker" id="stepMarker" style="background: var(--color-jira); --step-shadow: rgba(59, 130, 246, 0.4)">1</div>
          <div class="step-info">
            <h3 id="stepName">Jira Ticket</h3>
            <p id="stepDesc">Reading ticket requirements...</p>
          </div>
        </div>
        <div class="progress-track">
          <div class="progress-fill" id="progressFill" style="width: 10%"></div>
        </div>
      </div>

      <div class="panel-card">
        <div class="section-label">Event Log</div>
        <ul class="event-log" id="eventLog">
          <li class="event-item" data-step="0"><span class="event-marker"></span><span>Fetch Jira ticket</span></li>
          <li class="event-item" data-step="1"><span class="event-marker"></span><span>Claude writes code</span></li>
          <li class="event-item" data-step="2"><span class="event-marker"></span><span>Push to GitHub</span></li>
          <li class="event-item" data-step="3"><span class="event-marker"></span><span>Run CI pipeline</span></li>
          <li class="event-item" data-step="4"><span class="event-marker"></span><span>Jules code review</span></li>
          <li class="event-item" data-step="5"><span class="event-marker"></span><span>Merge to main</span></li>
        </ul>
      </div>
    </aside>
  </main>

  <footer class="footer">
    <a href="../guide/">Back to Guide</a>
    <span>Hosted on GitHub Pages</span>
  </footer>

  <script>
    const STEP_INTERVAL = 4000;
    const CIRCLE_CIRCUMFERENCE = 2 * Math.PI * 180; // ~1131

    // Node positions on circle (calculated from 60° intervals)
    // 0° = top, going clockwise
    const nodePositions = [
      { x: 250, y: 70 },    // 0: Jira (top, 0°)
      { x: 405.88, y: 160 }, // 1: Claude (60°)
      { x: 405.88, y: 340 }, // 2: GitHub (120°)
      { x: 250, y: 430 },    // 3: CI/CD (180°)
      { x: 94.12, y: 340 },  // 4: Jules (240°)
      { x: 94.12, y: 160 }   // 5: Merge (300°)
    ];

    const steps = [
      { name: 'Jira Ticket', desc: 'Reading ticket requirements...', color: '#3b82f6', shadow: 'rgba(59, 130, 246, 0.4)', progress: 10 },
      { name: 'Claude Code', desc: 'Writing tests and implementation...', color: '#f59e0b', shadow: 'rgba(245, 158, 11, 0.4)', progress: 28 },
      { name: 'GitHub PR', desc: 'Pushing code and creating PR...', color: '#a78bfa', shadow: 'rgba(167, 139, 250, 0.4)', progress: 45 },
      { name: 'CI Pipeline', desc: 'Running tests and validation...', color: '#10b981', shadow: 'rgba(16, 185, 129, 0.4)', progress: 62 },
      { name: 'Jules Review', desc: 'AI reviewing code changes...', color: '#ec4899', shadow: 'rgba(236, 72, 153, 0.4)', progress: 80 },
      { name: 'Merge', desc: 'Merging to main branch!', color: '#06b6d4', shadow: 'rgba(6, 182, 212, 0.4)', progress: 100 }
    ];

    let currentStep = 0;
    let isPaused = false;
    let seconds = 0;

    // DOM elements
    const orbitMarker = document.getElementById('orbitMarker');
    const markerGlow = document.getElementById('markerGlow');
    const completionArc = document.getElementById('completionArc');
    const centerStepNum = document.getElementById('centerStepNum');
    const nodes = document.querySelectorAll('.node');
    const arcs = document.querySelectorAll('.arc-connection');
    const stepMarker = document.getElementById('stepMarker');
    const stepName = document.getElementById('stepName');
    const stepDesc = document.getElementById('stepDesc');
    const progressFill = document.getElementById('progressFill');
    const eventLog = document.getElementById('eventLog');
    const statusDot = document.getElementById('statusDot');
    const statusText = document.getElementById('statusText');
    const taskTimer = document.getElementById('taskTimer');

    // Timer
    setInterval(() => {
      if (!isPaused) {
        seconds++;
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        taskTimer.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
      }
    }, 1000);

    function updateStep(index) {
      const step = steps[index];
      const pos = nodePositions[index];

      // Move orbiting marker
      orbitMarker.setAttribute('cx', pos.x);
      orbitMarker.setAttribute('cy', pos.y);
      markerGlow.setAttribute('cx', pos.x);
      markerGlow.setAttribute('cy', pos.y);

      // Update marker color
      orbitMarker.style.fill = step.color;
      orbitMarker.style.filter = `drop-shadow(0 0 20px ${step.color})`;
      markerGlow.style.stroke = step.color;

      // Update center display
      centerStepNum.textContent = index + 1;

      // Update completion arc (fills clockwise)
      const completedFraction = (index + 1) / steps.length;
      const dashOffset = CIRCLE_CIRCUMFERENCE * (1 - completedFraction);
      completionArc.style.strokeDashoffset = dashOffset;

      // Update nodes
      nodes.forEach((node, i) => {
        node.classList.remove('active', 'done');
        const bg = node.querySelector('.node-bg');

        if (i < index) {
          node.classList.add('done');
          bg.setAttribute('r', '36');
        } else if (i === index) {
          node.classList.add('active');
          bg.setAttribute('r', '42'); // 18% larger when active
        } else {
          bg.setAttribute('r', '36');
        }
      });

      // Update arc connections
      arcs.forEach((arc, i) => {
        arc.classList.remove('active', 'done');
        if (i < index) {
          arc.classList.add('done');
        } else if (i === index) {
          arc.classList.add('active');
        }
      });

      // Update panel
      stepMarker.style.background = step.color;
      stepMarker.style.setProperty('--step-shadow', step.shadow);
      stepMarker.textContent = index + 1;
      stepName.textContent = step.name;
      stepDesc.textContent = step.desc;
      progressFill.style.width = step.progress + '%';

      // Update event log
      const items = eventLog.querySelectorAll('.event-item');
      items.forEach((item, i) => {
        item.classList.remove('done', 'active', 'pending');
        const marker = item.querySelector('.event-marker');

        if (i < index) {
          item.classList.add('done');
          marker.textContent = '✓';
        } else if (i === index) {
          item.classList.add('active');
          marker.textContent = '';
        } else {
          item.classList.add('pending');
          marker.textContent = '';
        }
      });
    }

    function togglePause() {
      isPaused = !isPaused;
      statusDot.classList.toggle('paused', isPaused);
      statusText.textContent = isPaused ? 'Paused' : 'Running';
    }

    document.getElementById('orbitalContainer').addEventListener('click', togglePause);
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        togglePause();
      }
    });

    // Animation loop
    setInterval(() => {
      if (!isPaused) {
        currentStep = (currentStep + 1) % steps.length;
        updateStep(currentStep);
      }
    }, STEP_INTERVAL);

    // Initial state
    updateStep(currentStep);
  </script>
</body>
</html>
