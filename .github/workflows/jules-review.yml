name: Jules Code Review

on:
  pull_request:
    types: [opened, synchronize]
    branches:
      - main
      - develop

permissions:
  contents: read
  pull-requests: write

jobs:
  code-review:
    name: Jules Code Review
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Run Jules Code Review
        uses: google/jules-invoke@v1
        with:
          task: |
            Review this PR for:
            - Security issues (OWASP Top 10)
            - Performance problems (N+1 queries, inefficient loops)
            - Code style violations

            For critical issues, suggest fixes.
            End with APPROVED or CHANGES_REQUESTED.
